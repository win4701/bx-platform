<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Bloxio BX</title>

<style>
/* ===== THEME ===== */
:root{
  --bg:#0b0f14;
  --panel:#121820;
  --border:#1f2a3a;
  --green:#2ecc71;
  --text:#eaeaea;
  --muted:#9aa4b2;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui, Arial;
  background:var(--bg);
  color:var(--text);
  display:flex;
  flex-direction:column;
  height:100vh;
}

/* ===== HEADER ===== */
header{
  padding:14px;
  text-align:center;
  background:#0e141c;
  font-weight:600;
  font-size:18px;
}

/* ===== MAIN ===== */
main{
  flex:1;
  padding:16px;
  overflow-y:auto;
}

/* ===== SECTIONS ===== */
.section{display:none}
.section.active{display:block}

/* ===== CARDS ===== */
.card{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:14px;
  padding:16px;
  margin-bottom:16px;
  transition:.2s;
}
.card:hover{
  transform:translateY(-2px);
  box-shadow:0 10px 30px rgba(46,204,113,.15);
}

/* ===== WALLET ===== */
.wallet-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin:8px 0;
}
.wallet-row img{
  width:26px;
}

/* ===== INPUTS ===== */
input,select,button{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:1px solid #2a3445;
  background:#1a2230;
  color:#fff;
  margin-top:8px;
}
button{
  border:none;
  background:var(--green);
  color:#000;
  font-weight:600;
  cursor:pointer;
  transition:.2s;
}
button:hover{
  transform:scale(1.02);
  box-shadow:0 0 18px rgba(46,204,113,.35);
}
button.secondary{background:#3498db;color:#fff}
button.warn{background:#f1c40f;color:#000}

/* ===== CASINO GRID ===== */
.grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
}
.grid button{
  background:#1b2433;
  color:#fff;
}

/* ===== BOTTOM NAV ===== */
nav{
  display:flex;
  justify-content:space-around;
  align-items:center;
  padding:10px 0;
  background:#0e141c;
  border-top:1px solid var(--border);
}
nav .item{
  display:flex;
  flex-direction:column;
  align-items:center;
  font-size:12px;
  color:#aaa;
  cursor:pointer;
}
nav .item.active{
  color:var(--green);
}
nav img{
  width:22px;
  margin-bottom:4px;
}
</style>
</head>

<body>

<header>Bloxio BX</header>

<main>

  <!-- HOME -->
  <div class="section active" id="home">
    <div class="card">
      <h3>Wallet</h3>
      <div class="wallet-row"><img src="assets/images/icons/bx.png"> BX <span id="bx">0</span></div>
      <div class="wallet-row"><img src="assets/images/icons/ton.png"> TON <span id="ton">0</span></div>
      <div class="wallet-row"><img src="assets/images/icons/usdt.png"> USDT <span id="usdt">0</span></div>
    </div>
  </div>

  <!-- MARKET -->
  <div class="section" id="market">
    <div class="card">
      <h3>Market</h3>
      <select id="side">
        <option value="buy">Buy BX</option>
        <option value="sell">Sell BX</option>
      </select>
      <select id="asset">
        <option value="ton">TON</option>
        <option value="usdt">USDT</option>
      </select>
      <input id="amount" type="number" placeholder="Amount">
      <button onclick="market()">Confirm</button>
    </div>
  </div>

  <!-- CASINO -->
  <div class="section" id="casino">
    <div class="card">
      <h3>Casino</h3>
      <div class="grid">
        <button>Dice</button>
        <button>Chicken</button>
        <button>PvP</button>
        <button>Slots</button>
        <button>Crash</button>
      </div>
    </div>
  </div>

  <!-- MINING -->
  <div class="section" id="mining">
    <div class="card">
      <h3>Mining</h3>
      <button class="secondary">Silver</button>
      <button class="warn">Gold (40 BX / 20 USDT)</button>
    </div>
  </div>

</main>

<nav>
  <div class="item active" onclick="show('home')"><img src="assets/images/icons/home.png">Home</div>
  <div class="item" onclick="show('market')"><img src="assets/images/icons/market.png">Market</div>
  <div class="item" onclick="show('casino')"><img src="assets/images/icons/casino.png">Casino</div>
  <div class="item" onclick="show('mining')"><img src="assets/images/icons/mining.png">Mining</div>
</nav>

<script>
const uid = 1;

async function loadState(){
  const r = await fetch(`/state?uid=${uid}`);
  const d = await r.json();
  bx.textContent = d.bx;
  ton.textContent = d.ton;
  usdt.textContent = d.usdt;
}
loadState();

async function market(){
  await fetch(`/market/${side.value}`,{
    method:"POST",
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({
      uid,
      amount:Number(amount.value),
      against:asset.value
    })
  });
  loadState();
}

function show(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelectorAll('nav .item').forEach(i=>i.classList.remove('active'));
  event.currentTarget.classList.add('active');
}
</script>

</body>
</html>
