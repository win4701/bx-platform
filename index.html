<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>BX Mini App</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
body{margin:0;background:#0b0f1a;color:#fff;font-family:sans-serif}
header{padding:14px;background:#11162a;text-align:center;font-weight:700}
.card{background:#141b33;margin:12px;border-radius:12px;padding:14px}
.big{font-size:18px;font-weight:700}
.small{font-size:13px;opacity:.85}
</style>
</head>

<body>
<header>BX Platform</header>

<div class="card">
  <div class="big">Wallet</div>
  <div id="bx">BX: --</div>
  <div id="usdt">USDT: --</div>
  <div id="ton">TON: --</div>
</div>

<div class="card">
  <div class="big">Mining</div>
  <div id="rate">Rate: --</div>
</div>

<div class="card">
  <div class="big">ğŸ† Leaderboard</div>
  <div id="leaderboard" class="small"></div>
</div>

<div class="card">
  <div class="big">ğŸ Airdrop</div>
  <div id="airdrop" class="small"></div>
</div>

<div class="card">
  <div class="big">ğŸ° Casino</div>
  <div id="casino" class="small"></div>
</div>

<div class="card">
  <div class="big">ğŸ¤ Referral</div>
  <div id="referral" class="small"></div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.ready();
const uid = tg.initDataUnsafe?.user?.id || 1;

async function load(){
  const s = await fetch(`/state?uid=${uid}`).then(r=>r.json());

  bx.textContent   = "BX: " + s.wallet.bx;
  usdt.textContent = "USDT: " + s.wallet.usdt;
  ton.textContent  = "TON: " + s.wallet.ton;

  rate.textContent = "Rate: " + s.mining.rate + " BX/sec";

  leaderboard.innerHTML = s.leaderboard
    .map(x => `${x.rank}. ${x.uid===uid?"You":"User#"+x.uid} â€” ${x.bx} BX`)
    .join("<br>");

  airdrop.innerHTML =
    `Progress: ${s.airdrop.progress_pct}%<br>${s.airdrop.message}`;

  casino.innerHTML =
    `RTP: ${Math.round(s.casino.rtp*100)}%<br>Provably Fair`;

  referral.innerHTML =
    `Invited: ${s.referral.count}<br>
     Reward: ${s.referral.reward_bx} BX<br>
     <small>${s.referral.link}</small>`;
}

load();
setInterval(load, 5000);
</script><
    
    <script src="app.js"></script>
  </body>
</html>
