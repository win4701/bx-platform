<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bloxio</title>

<style>
/* ===== GLOBAL ===== */
body{
  margin:0;
  font-family:system-ui, Arial;
  background:#0b0f14;
  color:#eaeaea;
  padding:16px;
}
h1{margin:0 0 16px}
h2{margin:0 0 12px;font-size:18px}
.card{
  background:#121820;
  border:1px solid #1f2a3a;
  border-radius:10px;
  padding:16px;
  margin-bottom:16px;
}
.row{
  display:flex;
  justify-content:space-between;
  margin:6px 0;
}
label{
  display:block;
  font-size:13px;
  margin-top:10px;
}
input,select,button{
  width:100%;
  padding:10px;
  margin-top:6px;
  background:#1a2230;
  border:1px solid #2a3445;
  border-radius:6px;
  color:#fff;
}
button{
  background:#2ecc71;
  border:none;
  font-weight:600;
  cursor:pointer;
}
button.secondary{background:#3498db}
button.warn{background:#f39c12}
button:disabled{opacity:.6}
.muted{font-size:13px;color:#aaa}
hr{border:none;border-top:1px solid #1f2a3a;margin:12px 0}
</style>
</head>

<body>

<h1>Bloxio</h1>

<!-- ================= WALLET ================= -->
<div class="card">
  <h2>Wallet</h2>
  <div class="row"><span>BX</span><span id="bx">0</span></div>
  <div class="row"><span>USDT</span><span id="usdt">0</span></div>
  <div class="row"><span>TON</span><span id="ton">0</span></div>
</div>

<!-- ================= PAYMENTS ================= -->
<div class="card">
  <h2>Payments</h2>

  <label>Deposit Provider</label>
  <select id="depositProvider">
    <option value="binance">Binance</option>
    <option value="redotpay">RedotPay</option>
  </select>

  <label>Deposit Amount</label>
  <input id="depositAmount" type="number">

  <button onclick="deposit()">Deposit</button>

  <hr>

  <label>Withdraw Provider</label>
  <select id="withdrawProvider">
    <option value="binance">Binance</option>
    <option value="redotpay">RedotPay</option>
  </select>

  <label>Withdraw Amount</label>
  <input id="withdrawAmount" type="number">

  <button class="warn" onclick="withdraw()">Withdraw</button>
</div>

<!-- ================= MARKET ================= -->
<div class="card">
  <h2>Market</h2>

  <label>Action</label>
  <select id="marketSide">
    <option value="buy">Buy BX</option>
    <option value="sell">Sell BX</option>
  </select>

  <label>Amount</label>
  <input id="marketAmount" type="number">

  <button onclick="market()">Confirm</button>
</div>

<!-- ================= MINING ================= -->
<div class="card">
  <h2>Mining</h2>

  <div class="row"><span>Plan</span><span id="plan">Silver</span></div>
  <div class="row"><span>Rate</span><span>+0.001 BX / min</span></div>

  <button class="secondary">Upgrade to Gold</button>
</div>

<!-- ================= AIRDROP ================= -->
<div class="card">
  <h2>Airdrop</h2>

  <div class="muted">Complete tasks to unlock fixed rewards</div>

  <button>Join Telegram</button>
  <button>Follow Twitter</button>
  <button disabled>Trade BX (Locked)</button>
</div>

<!-- ================= CASINO ================= -->
<div class="card">
  <h2>Casino</h2>
  <div class="muted">Entertainment only</div>

  <button onclick="playCasino('dice')">Play Dice</button>
  <button onclick="playCasino('crash')">Play Crash</button>
</div>

<script>
const uid = 1;

/* ===== STATE ===== */
async function loadWallet(){
  const r = await fetch(`/state?tg_id=${uid}`);
  const d = await r.json();
  bx.textContent = d.wallet.bx;
  usdt.textContent = d.wallet.usdt;
  ton.textContent = d.wallet.ton;
}

/* ===== PAYMENTS ===== */
async function deposit(){
  await fetch("/deposit",{
    method:"POST",
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({
      uid,
      provider:depositProvider.value,
      amount:depositAmount.value
    })
  });
}

async function withdraw(){
  await fetch("/withdraw",{
    method:"POST",
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({
      uid,
      provider:withdrawProvider.value,
      amount:withdrawAmount.value
    })
  });
}

/* ===== MARKET ===== */
async function market(){
  await fetch(`/market/${marketSide.value}`,{
    method:"POST",
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({
      uid,
      amount:marketAmount.value
    })
  });
  loadWallet();
}

/* ===== CASINO ===== */
async function playCasino(game){
  await fetch(`/casino/v3/play?uid=${uid}&game=${game}`,{
    method:"POST"
  });
  loadWallet();
}

loadWallet();
</script>

</body>
</html>
